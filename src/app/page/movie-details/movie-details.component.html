<button mat-button routerLink="../">Retour à la liste des films</button>

<mat-tab-group (selectedTabChange)="onTabChanged($event)" class="tab-group">
  <mat-tab>
    <ng-template mat-tab-label>
      <mat-icon class="tab-icon material-symbols-outlined">movie</mat-icon>
      Infos générales
    </ng-template>

    <div class="py-4">
      @if (editGeneralInfos) {
      <app-general-infos-form [form]="generalInfosForm" (selectImage)="selectImage($event)">
      </app-general-infos-form>

      <div class="fixed bottom-5 right-5">
        <button mat-fab class="float-right m-1" matTooltip="Valider" aria-label="Example icon button with a check icon"
          color="accent" [disabled]="generalInfosForm?.invalid" (click)="saveGeneralInfos()">
          <mat-icon>check</mat-icon>
        </button>
        <button mat-fab class="float-right m-1" matTooltip="Annuler" aria-label="Example icon button with a cancel icon"
          color="accent" (click)="cancelGeneralInfos()">
          <mat-icon>cancel</mat-icon>
        </button>
      </div>
      } @else {
      <app-movie-detail [movie]="generalInfos"></app-movie-detail>

      <div class="fixed bottom-5 right-5">
        <button mat-fab class="float-right m-1" matTooltip="Modifier"
          aria-label="Example icon button with a delete icon" color="accent" (click)="editGeneralInfos=true">
          <mat-icon>edit</mat-icon>
        </button>
      </div>
      }
    </div>
  </mat-tab>

  <mat-tab>
    <ng-template mat-tab-label>
      <mat-icon class="tab-icon material-symbols-outlined">group</mat-icon>
      Fiche technique
    </ng-template>

    <div class="py-4">
      @if (editTechnicalTeam) {
      <app-technical-team-form [form]="technicalTeamForm"></app-technical-team-form>

      <div class="fixed bottom-5 right-5">
        <button mat-fab class="float-right m-1" matTooltip="Valider" aria-label="Example icon button with a delete icon"
          color="accent" (click)="saveTechnicalTeam()">
          <mat-icon>check</mat-icon>
        </button>
        <button mat-fab class="float-right m-1" matTooltip="Annuler" aria-label="Example icon button with a cancel icon"
          color="accent" (click)="cancelTechnicalTeam()">
          <mat-icon>cancel</mat-icon>
        </button>
      </div>
      } @else {
      <app-technical-team [technicalTeam]="technicalTeam"></app-technical-team>

      <div class="fixed bottom-5 right-5">
        <button mat-fab class="float-right m-1" matTooltip="Modifier"
          aria-label="Example icon button with a delete icon" color="accent" (click)="editTechnicalTeam=true">
          <mat-icon>edit</mat-icon>
        </button>
      </div>
      }
    </div>
  </mat-tab>

  <mat-tab>
    <ng-template mat-tab-label>
      <mat-icon class="tab-icon material-symbols-outlined">comedy_mask</mat-icon>
      Casting
    </ng-template>

    <div class="p-4">
      @if (editCasting) {
      <app-casting-form [form]="castingForm"></app-casting-form>

      <div class="fixed bottom-5 right-5">
        <button mat-fab class="float-right m-1" matTooltip="Valider" aria-label="Example icon button with a delete icon"
          color="accent" (click)="saveCasting()">
          <mat-icon>check</mat-icon>
        </button>
        <button mat-fab class="float-right m-1" matTooltip="Annuler" aria-label="Example icon button with a cancel icon"
          color="accent" (click)="cancelCasting()">
          <mat-icon>cancel</mat-icon>
        </button>
      </div>
      } @else {
      <div>
        <app-casting [casting]="casting"></app-casting>

        <div class="fixed bottom-5 right-5">
          <button mat-fab class="float-right m-1" matTooltip="Modifier"
            aria-label="Example icon button with a delete icon" color="accent" (click)="editCasting=true">
            <mat-icon>edit</mat-icon>
          </button>
        </div>
      </div>
      }
    </div>
  </mat-tab>

  <mat-tab>
    <ng-template mat-tab-label>
      <mat-icon class="tab-icon material-symbols-outlined">trophy</mat-icon>
      Récompenses
    </ng-template>

    <div class="p-4">
      @if (editAwards) {
      <app-awards-form [form]="awardsForm"></app-awards-form>

      <div class="fixed bottom-5 right-5">
        <button mat-fab class="float-right m-1" matTooltip="Valider" aria-label="Example icon button with a delete icon"
          color="accent" (click)="saveAwards()">
          <mat-icon>check</mat-icon>
        </button>
        <button mat-fab class="float-right m-1" matTooltip="Annuler" aria-label="Example icon button with a cancel icon"
          color="accent" (click)="cancelAwards()">
          <mat-icon>cancel</mat-icon>
        </button>
      </div>
      } @else {
      <div>
        <app-awards [awards]="awards"></app-awards>

        <div class="fixed bottom-5 right-5">
          <button mat-fab class="float-right m-1" matTooltip="Modifier"
            aria-label="Example icon button with a delete icon" color="accent" (click)="editAwards=true">
            <mat-icon>edit</mat-icon>
          </button>
        </div>
      </div>
      }
    </div>
  </mat-tab>
</mat-tab-group>